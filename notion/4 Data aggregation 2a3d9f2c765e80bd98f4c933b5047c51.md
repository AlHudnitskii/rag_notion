# 4. Data aggregation

Категория: SQL Databases
Статус: Готово

### Оператор GROUP BY

![image.png](image%20615.png)

Следует иметь в виду, что для GROUP BY все значения NULL трактуются как равные, т.е. при группировке по полю, содержащему NULL-значения, все такие строки попадут в одну группу.

Группировка по одному полю:

![image.png](image%20616.png)

Группировка по двух полям:

![image.png](image%20617.png)

### Агрегатные функции

Агрегатная функция – это функция, которая выполняет вычисление на наборе значений и возвращает одиночное значение.

![image.png](image%20618.png)

Агрегатные функции применяются для значений, не равных NULL. Исключением является функция COUNT(*).

### **Оператор HAVING**

В PostgreSQL алиасы, объявленные в SELECT, недоступны в HAVING
****

![image.png](image%20619.png)

Оператор `WHERE` работает с отдельными строками до группировки, а `HAVING` фильтрует уже сгруппированные данные на основе агрегатных функций. `WHERE` быстрее, так как обрабатывает меньше данных, но `HAVING` необходим, когда нужно применить условие к результатам группировки (например, `COUNT` или `SUM`).