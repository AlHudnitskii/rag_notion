# 21. Other

Категория: Python Core
Статус: Готово

### **Суб-интерпретаторы в Python**

Суб-интерпретаторы (PEP554) - это изолированные среды выполнения Python в одном процессе. 

Особенности: 

1. Каждый интерпретатор имеет свой GIL (с Python 3.12+)
2. Изолированное пространство имен
3. Не делятся объектами напрямую (только через каналы)

![image.png](image%20319.png)

Параллельное выполнение Python-кода без накладных расходов multiprocessing.

**Суб-интерпретаторы vs Многопроцессорность**

### **Общее:**

- **Изоляция** памяти и состояния
- **Параллельное выполнение** (на разных ядрах CPU)
- **Обход GIL** в Python

Главное отличие: невозможность общения между суб-интерпретаторами, в отличие от многопроцессорности.

![image.png](image%20320.png)

### **Сортировка в Python (Timsort)**

**Особенности:**

- Комбинация merge sort и insertion sort
- Сложность: O(n log n) в худшем случае, O(n) в лучшем
- Стабильная сортировка (сохраняет порядок равных элементов)
- Оптимизирована для реальных данных (часто частично отсортированных)

![image.png](image%20321.png)

**Почему Timsort эффективен:**

- Находит уже отсортированные подпоследовательности (runs)
- Умно объединяет их
- Минимум сравнений для частично отсортированных данных

### Утечка памяти в Python

**Утечка памяти** - когда программа постоянно потребляет память, но не освобождает её.

### **Основные причины в Python:**

- **Циклические ссылки** (особенно с участием `__del__`)
- **Глобальные переменные**, накапливающие данные
- **Незакрытые ресурсы** (файлы, сокеты, соединения БД)
- **Кэши без ограничений**