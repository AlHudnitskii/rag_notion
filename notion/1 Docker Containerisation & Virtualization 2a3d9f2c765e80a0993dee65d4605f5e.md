# 1. Docker: Containerisation & Virtualization

Категория: Docker & Kubernetes
Статус: Проверено

Контейнеры и виртуальные машины — очень похожие между собой технологии виртуализации ресурсов. 

Виртуализация — это процесс, при котором один системный ресурс, такой как оперативная память, ЦП, диск или сеть, может быть виртуализирован и представлен в виде множества ресурсов. Основное различие контейнеров и виртуальных машин заключается в том, что виртуальные машины виртуализируют весь компьютер вплоть до аппаратных уровней, а контейнеры — только программные уровни выше уровня операционной системы.

![image.png](image%20579.png)

### Что такое контейнер?

Контейнеры — это легкие программные пакеты, содержащие все зависимости, необходимые для запуска автономного программного приложения. К этим зависимостям относятся системные библиотеки, сторонние пакеты кода и другие приложения уровня операционной системы. Зависимости, входящие в контейнер, находятся на уровнях стека выше уровня операционной системы.

### Как работает

Приложения и их зависимости упаковываются в контейнеры, которые используют ядро ОС хоста, изолируясь друг от друга и от хоста.

### Prons

- **Скорость итерации**

Поскольку контейнеры не требуют много ресурсов и включают в себя только программное обеспечение верхнего уровня, их можно быстро модифицировать и итеративно менять.

- **Надежная экосистема**

В большинстве систем контейнерных сред выполнения существует общедоступный размещенный репозиторий готовых контейнеров. Такие репозитории контейнеров содержат множество популярных программных приложений, таких как базы данных или системы обмена сообщениями, которые можно мгновенно загрузить и выполнить, чтобы сэкономить время команды разработчиков.

### Cons

- **Уязвимость общего узла**

Поскольку все контейнеры используют одну и ту же опорную аппаратную систему, находящуюся ниже уровня операционной системы, эксплойт в одном контейнере может вырваться на свободу и повлиять на общие аппаратные ресурсы. Большинство популярных контейнерных сред выполнения предлагают публичные репозитории готовых контейнеров. Использование таких публичных образов сопряжено с угрозой безопасности, поскольку они могут содержать эксплойты или уязвимости, которыми могут воспользоваться злоумышленники.

### Инструменты для работы с контейнерами

- **Docker**

Это самая популярная и широко используемая контейнерная среда выполнения. Docker Hub — это гигантский общедоступный репозиторий популярных программных приложений в контейнерах. Контейнеры Docker Hub можно мгновенно загружать и развертывать в локальных средах выполнения Docker.

- **RKT**RKT (читается как «рокет»)

Контейнеры RKT нацелены на решение проблем безопасности, связанных с перекрестными заражением, от которых страдают другие системы контейнерных сред.

- **Контейнеры Linux (LXC)**

Проект Linux Containers представляет собой систему выполнения контейнеров Linux с открытым исходным кодом. LXC используется для изоляции процессов уровня операционной системы друг от друга. В основе Docker на самом деле лежит технология LXC. 

- **CRI-O**

CRI-O — это реализация интерфейса среды выполнения для контейнеров Kubernetes (CRI), которая позволяет использовать среды выполнения, совместимые с инициативой открытых контейнеров (OCI). Это легковесная альтернатива использованию Docker в качестве среды выполнения для Kubernetes.

### Что такое виртуальная машина?

Виртуальные машины — это тяжелые программные пакеты, которые обеспечивают полную эмуляцию низкоуровневых аппаратных устройств, таких как ЦП, дисковые и сетевые устройства. Виртуальная машина также может включать дополнительный программный стек для запуска на эмулируемых аппаратных средствах. Такие пакеты аппаратных и программных средств представляет собой полнофункциональный снимок вычислительной системы.

### Как работает

Гипервизор создает полную эмуляцию аппаратного обеспечения, позволяя запускать несколько разных операционных систем (гостевых ОС) на одном физическом сервере.

### Prons

- **Полная защита путем изоляции**

Виртуальные машины работают изолированно как полностью автономные системы. Это означает, что они защищены от любых эксплойтов или помех со стороны других виртуальных машин на общем узле. Если отдельная виртуальная машина пострадает от эксплойта, она будет изолирована и не сможет повредить соседние виртуальные машины.

- **Интерактивная разработка**

Контейнеры обычно представляют собой статические определения ожидаемой конфигурации и зависимостей, необходимых для запуска контейнера. Виртуальные машины более динамичны и могут дорабатываться в интерактивном режиме. 

После указания базовых аппаратных характеристик виртуальную машину можно рассматривать как компьютер без операционной среды. Можно вручную установить программное обеспечение на виртуальную машину и сделать снимок состояния для фиксации текущей конфигурации. Снимки виртуальной машины можно использовать для ее восстановления до конкретного момента времени или для запуска дополнительных виртуальных машин с такой конфигурацией.

### Cons

- **Скорость итерации**

Создание и воспроизведение виртуальных машин занимает много времени, поскольку они охватывают полный системный стек. Любые изменения снимка состояния виртуальной машины могут потребовать значительного времени на воспроизведение и проверку работоспособности.

- **Стоимость занимаемого хранилища**

Виртуальные машины могут занимать много места в хранилище, быстро вырастая до нескольких гигабайтов в объеме. Это может привести к нехватке дискового пространства на компьютере, где размещаются виртуальные машины.

### Инструменты для работы с VM

- **VirtualBox**

Это бесплатная система эмуляции архитектуры x86 с открытым исходным кодом, принадлежащая Oracle. VirtualBox — одна из самых популярных и известных платформ виртуальных машин с экосистемой дополнительных инструментов для разработки и распространения образов виртуальных машин.

- **VMware**

Решения VMware поставляются в комплекте с гипервизором*.* VMware имеет надежный пользовательский интерфейс для управления виртуальными машинами. Это отличный вариант для корпоративного использования виртуальных машин с официальной поддержкой.

P.S. Гипервизор — это программный слой или инструмент, который позволяет создавать и запускать несколько виртуальных машин (ВМ) на одном физическом сервере, разделяя его ресурсы (ЦПУ, память, хранилище) и изолируя их друг от друга.

- **QEMU**

QEMU — самый надежный вариант виртуальной машины для эмуляции аппаратного обеспечения. Поддерживается любая стандартная аппаратная архитектура. QEMU — утилита командной строки без графического пользовательского интерфейса для настройки или выполнения, что делает это решение одним из самых быстрых вариантов виртуальных машин.