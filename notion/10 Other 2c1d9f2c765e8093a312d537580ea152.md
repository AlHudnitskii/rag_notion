# 10. Other

Категория: Web & Networks
Статус: Готово

## Типы соединений

**По характеру взаимодействия**

- **Синхронное:** Клиент отправляет запрос и ждет ответа, блокируя дальнейшие действия до получения результата.
- **Асинхронное:** Клиент отправляет запрос и продолжает работу, получая ответ позже (через колбэк или промис), что более эффективно.
- **Запрос-ответ:** Классическая модель: клиент запрашивает, сервер отвечает. Идеально для веб-страниц.
- **аПубликация-Подписка (Publish-Subscribe):** Клиенты подписываются на темы, а сервер отправляет им сообщения, когда они появляются, без явного запроса от клиента.

**По протоколам и технологиям**

- **HTTP/HTTPS:** Основной протокол для веба. Использует методы (GET, POST) для обмена данными.
- **WebSockets:** Позволяют установить постоянное двунаправленное соединение для приложений реального времени (чаты, игры).

Веб-сокеты сильно разряжают устройство ввиду постоянного соединения между сервером и клиентом.

- **TCP/IP (Сокеты):** Обеспечивают надежную доставку данных через TCP и быструю, но ненадежную через UDP.
- [**FTP](https://www.google.com/search?q=FTP&client=opera&hs=Pzi&sca_esv=4b43b892010f4a94&sxsrf=AE3TifPmU4vxUwDwkiLJw6YZ-X6T6uUJIA%3A1765052351263&ei=v480aeXvD97ewPAP6se0kAY&ved=2ahUKEwjS89S85KmRAxUuERAIHexnB8MQgK4QegQIBRAE&uact=5&oq=%D0%A2%D0%B8%D0%BF%D1%8B+%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D0%B9+%D0%BC%D0%B5%D0%B6%D0%B4%D1%83+%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%BE%D0%BC+%D0%B8+%D0%BA%D0%BB%D0%B8%D0%B5%D0%BD%D1%82%D0%BE%D0%B2+%D0%B2+%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B8&gs_lp=Egxnd3Mtd2l6LXNlcnAicdCi0LjQv9GLINGB0L7QtdC00LjQvdC10L3QuNC5INC80LXQttC00YMg0YHQtdGA0LLQtdGA0L7QvCDQuCDQutC70LjQtdC90YLQvtCyINCyINC_0YDQvtCz0YDQsNC80LzQuNGA0L7QstCw0L3QuNC4MggQABiABBiiBDIFEAAY7wUyCBAAGIAEGKIEMgUQABjvBTIIEAAYgAQYogRIhGlQwAtYnmZwDHgBkAEAmAFooAH9GaoBBDM1LjK4AQPIAQD4AQGYAimgAtMVwgIKEAAYsAMY1gQYR8ICCBAAGKIEGIkFwgIEECEYCpgDAIgGAZAGCJIHBDM1LjagB6DOAbIHBDIzLja4B6wVwgcGMC40MC4xyAdVgAgA&sclient=gws-wiz-serp&mstk=AUtExfD2fI6kzZH5-hyURBvw0zWwl4EFPopDF2cZKU9cYNqRgOeH4bS5MDbBlDqPHDle_7RHNs5YjgYKrTiFjKPxHkUiGigkGvU0niYhkTS7QdLRCsWyKTeKjQLfzH8XNXhiazrUPOf98mpdXz4h7NGySXvJe6v75LUZsvhULI1x-GQqWVRyon_EgfDtXWlTbjuih90nDk1EZ0Iu32pcgGXFiWCbYtonG9VxLg4pHnN5ycs4y9CuVWX7f2akZtJK7iD9BFbSA7T9J-E3HLT8kOMPGQuz&csui=3):** Протокол для передачи файлов.
- [**SSH](https://www.google.com/search?q=SSH&client=opera&hs=Pzi&sca_esv=4b43b892010f4a94&sxsrf=AE3TifPmU4vxUwDwkiLJw6YZ-X6T6uUJIA%3A1765052351263&ei=v480aeXvD97ewPAP6se0kAY&ved=2ahUKEwjS89S85KmRAxUuERAIHexnB8MQgK4QegQIBRAG&uact=5&oq=%D0%A2%D0%B8%D0%BF%D1%8B+%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D0%B9+%D0%BC%D0%B5%D0%B6%D0%B4%D1%83+%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%BE%D0%BC+%D0%B8+%D0%BA%D0%BB%D0%B8%D0%B5%D0%BD%D1%82%D0%BE%D0%B2+%D0%B2+%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B8&gs_lp=Egxnd3Mtd2l6LXNlcnAicdCi0LjQv9GLINGB0L7QtdC00LjQvdC10L3QuNC5INC80LXQttC00YMg0YHQtdGA0LLQtdGA0L7QvCDQuCDQutC70LjQtdC90YLQvtCyINCyINC_0YDQvtCz0YDQsNC80LzQuNGA0L7QstCw0L3QuNC4MggQABiABBiiBDIFEAAY7wUyCBAAGIAEGKIEMgUQABjvBTIIEAAYgAQYogRIhGlQwAtYnmZwDHgBkAEAmAFooAH9GaoBBDM1LjK4AQPIAQD4AQGYAimgAtMVwgIKEAAYsAMY1gQYR8ICCBAAGKIEGIkFwgIEECEYCpgDAIgGAZAGCJIHBDM1LjagB6DOAbIHBDIzLja4B6wVwgcGMC40MC4xyAdVgAgA&sclient=gws-wiz-serp&mstk=AUtExfD2fI6kzZH5-hyURBvw0zWwl4EFPopDF2cZKU9cYNqRgOeH4bS5MDbBlDqPHDle_7RHNs5YjgYKrTiFjKPxHkUiGigkGvU0niYhkTS7QdLRCsWyKTeKjQLfzH8XNXhiazrUPOf98mpdXz4h7NGySXvJe6v75LUZsvhULI1x-GQqWVRyon_EgfDtXWlTbjuih90nDk1EZ0Iu32pcgGXFiWCbYtonG9VxLg4pHnN5ycs4y9CuVWX7f2akZtJK7iD9BFbSA7T9J-E3HLT8kOMPGQuz&csui=3):** Защищенное соединение для удаленного управления серверами.
- [**GraphQL](https://www.google.com/search?q=GraphQL&client=opera&hs=Pzi&sca_esv=4b43b892010f4a94&sxsrf=AE3TifPmU4vxUwDwkiLJw6YZ-X6T6uUJIA%3A1765052351263&ei=v480aeXvD97ewPAP6se0kAY&ved=2ahUKEwjS89S85KmRAxUuERAIHexnB8MQgK4QegQIBRAI&uact=5&oq=%D0%A2%D0%B8%D0%BF%D1%8B+%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D0%B9+%D0%BC%D0%B5%D0%B6%D0%B4%D1%83+%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%BE%D0%BC+%D0%B8+%D0%BA%D0%BB%D0%B8%D0%B5%D0%BD%D1%82%D0%BE%D0%B2+%D0%B2+%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B8&gs_lp=Egxnd3Mtd2l6LXNlcnAicdCi0LjQv9GLINGB0L7QtdC00LjQvdC10L3QuNC5INC80LXQttC00YMg0YHQtdGA0LLQtdGA0L7QvCDQuCDQutC70LjQtdC90YLQvtCyINCyINC_0YDQvtCz0YDQsNC80LzQuNGA0L7QstCw0L3QuNC4MggQABiABBiiBDIFEAAY7wUyCBAAGIAEGKIEMgUQABjvBTIIEAAYgAQYogRIhGlQwAtYnmZwDHgBkAEAmAFooAH9GaoBBDM1LjK4AQPIAQD4AQGYAimgAtMVwgIKEAAYsAMY1gQYR8ICCBAAGKIEGIkFwgIEECEYCpgDAIgGAZAGCJIHBDM1LjagB6DOAbIHBDIzLja4B6wVwgcGMC40MC4xyAdVgAgA&sclient=gws-wiz-serp&mstk=AUtExfD2fI6kzZH5-hyURBvw0zWwl4EFPopDF2cZKU9cYNqRgOeH4bS5MDbBlDqPHDle_7RHNs5YjgYKrTiFjKPxHkUiGigkGvU0niYhkTS7QdLRCsWyKTeKjQLfzH8XNXhiazrUPOf98mpdXz4h7NGySXvJe6v75LUZsvhULI1x-GQqWVRyon_EgfDtXWlTbjuih90nDk1EZ0Iu32pcgGXFiWCbYtonG9VxLg4pHnN5ycs4y9CuVWX7f2akZtJK7iD9BFbSA7T9J-E3HLT8kOMPGQuz&csui=3):** Гибкий API, позволяющий клиенту запрашивать только нужные данные.

**По архитектурным особенностям**

- **Тонкий клиент:** Сервер выполняет большую часть логики, клиент в основном отображает данные (браузер).
- **Толстый клиент:** Клиент обладает высокой вычислительной мощностью, выполняя сложную логику локально, обращаясь к серверу за данными.

### Как работает электронная почта

Отправка писем по электронной почте происходит по протоколу SMTP.

*SMTP (Simple Mail Transfer Protocol) — это простой протокол передачи почты, используемый для отправки электронных писем по сети, в частности, через интернет.*
Он был достаточно небезопасным, и потому в 2008 году к протоколу SMTP добавили поддержку шифрования, авторизацию и 8-битные символы и назвали ESMTP, где E означает Extended. Но все продолжают его называть SMTP. 

Для работы SMTP в TCP зарезервирован порт 25. Порты 465 и 587 используются для общения клиента и сервера.

Получение писем происходит по 2 протоколам: IMAP (Internet Message Access Protocol) и POP3 (Post Office Protocol Version 3).

POP3 работает только с одним клиентов. 

IMAP более универсальный для пользователя, но менее быстрый, в отличие от POP3.

### Webhooks

Вебхук (webhook) — это **способ автоматической передачи данных между веб-сервисами в реальном времени по событию, когда один сервис сам отправляет уведомление другому (например, при покупке клиента), вместо того чтобы второй сервис постоянно «опрашивал» первый, что экономит ресурсы и позволяет мгновенно реагировать на изменения** (например, сразу отправлять email-письмо или создавать задачу в CRM). Это HTTP-вызов (обычно POST) от источника к приемнику, который срабатывает при заданном событии (триггере).

**Как это работает?**

1. **Событие**: Что-то происходит в одной системе (например, новый заказ, регистрация пользователя).
2. **Триггер**: Система-источник распознает событие.
3. **HTTP-запрос**: Источник мгновенно отправляет HTTP-запрос (payload с данными) на заранее заданный URL (адрес приемника).
4. **Обработка**: Система-приемник (например, ваша CRM) получает данные и выполняет дальнейшие действия (создает задачу, отправляет уведомление).

**Пример**

- **Сценарий**: Покупатель оформляет заказ в интернет-магазине.
- **Вебхук**: Магазин отправляет вебхук на URL вашего сервиса аналитики.
- **Действие**: Сервис аналитики получает данные о заказе и сразу же добавляет их в базу для отслеживания продаж, не дожидаясь, пока он сам запросит эти данные через API.

**Основные преимущества**

- **Автоматизация**: Мгновенная реакция на события без ручного вмешательства.
- **Эффективность**: Снижает нагрузку на серверы, так как нет постоянных запросов впустую (как при polling-методе).
- **Интеграция**: Легкий способ связать разные приложения (CRM, почтовые сервисы, аналитику).

**Чем отличается от API?**

- **API**: Обычно клиент (приложение) запрашивает данные у сервера.
- **Вебхук**: Сервер (источник) сам отправляет данные клиенту (приемнику) при наступлении события, инициатором является источник.

Вебхуки широко используются для создания связей между сервисами, автоматизации маркетинга, синхронизации данных и уведомлений в реальном времени.

![image.png](image%20776.png)

![image.png](image%20777.png)

### **Server-Sent Events (SSE)**

Server-Sent Events (SSE) представляют собой технологию, позволяющую серверу отправлять поток событий клиенту по одностороннему соединению. Для поддержания соединения открытым, сервер может отправлять пустые события с определенной периодичностью, чтобы предотвратить закрытие соединения браузером из-за таймаута. Это делает их идеальным выбором для ситуаций, когда сервер должен регулярно обновлять информацию на веб-странице, например, для отображения изменений в ленте новостей или прогресса загрузки.

*Преимущества*: Простая реализация на стороне сервера и клиента, автоматическое восстановление соединения при обрыве обеспечивает надежную передачу данных. Широкая поддержка как браузерами, так и веб-фреймворками.

*Недостатки*: Только односторонняя передача данных от сервера к клиенту, может не поддерживаться старыми браузерами.

### **Long Poling**

**Long Polling** (длинный опрос) — клиент отправляет запрос, а сервер держит его открытым, пока не появятся новые данные, после чего отправляет ответ и закрывает соединение; клиент немедленно отправляет новый запрос, что снижает нагрузку, чем при Short Polling, но уступает по эффективности WebSockets для работы в реальном времени, эмулируя push-уведомления. 

*Преимущества*: Простота в понимании и реализации, асинхронная передача данных со стороны сервера.

*Недостатки*: Задержки в передаче данных из-за ожиданий и таймаутов, может приводить к высокой нагрузке на сервер из-за большого количества открытых соединений, может потребоваться настройка сервера. Подход неэффективен при постоянном потоке данных.

### **Short Polling**

**Short Polling** (короткий опрос) — клиент отправляет запрос и сразу ждёт короткий ответ (часто пустой), повторяя это через короткие интервалы (например, каждые 3-5 секунд), что создаёт много трафика.

*Преимущества*: Самый простой в реализации подход, может быть реализован практически на любой платформе с любым языком программирования.

*Недостатки*: Самый неэффективный подход во всех отношениях, однако не требующий никаких дополнительных действий для реализации. Создает ненужные запросы в случае отсутствия обновлений данных. Высокая нагрузка на сервер, таймауты при передаче данных.

• Используются для имитации двунаправленной связи в приложениях, когда полноценные WebSockets не нужны или сложны в реализации, например, в некоторых мессенджерах (Telegram Bot API).

### Семантическое версионирование

Семантическое версионирование (SemVer): MAJOR.MINOR.PATCH, где 

- 1 (MAJOR) — крупные, ломающие изменения;
- 2 (MINOR) — новые функции без нарушения совместимости;
- 3 (PATCH) — мелкие исправления ошибок, обратно совместимые.

**Разберем по частям:**

- **`1` (MAJOR): Мажорная версия**
    - Увеличивается при **необратимых изменениях API** (breaking changes).
    - Обновление до 2.0.0 может сломать ваш код, работавший с 1.x.x.
- **`2` (MINOR): Минорная версия**
    - Увеличивается при добавлении **новой функциональности**, но с сохранением обратной совместимости.
    - Обновление до 1.3.0 безопасно, если вы работали с 1.2.x.
- **`3` (PATCH): Патч-версия**
    - Увеличивается при **исправлении ошибок** без добавления новых функций.
    - Обновление до 1.2.4 — это, как правило, просто баг-фикс, который безопасно обновить.

**Примеры использования в менеджерах пакетов (npm, Composer):**

- `^1.2.3` (Карет/Шапочка): >=1.2.3, но <2.0.0 — разрешает минорные и патч-обновления, но не мажорные.
- `~1.2.3` (Тилда/Тильда): >=1.2.3, но <1.3.0 — разрешает только патч-обновления.