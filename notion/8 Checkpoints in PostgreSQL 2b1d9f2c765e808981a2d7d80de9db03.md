# 8. Checkpoints in PostgreSQL

Категория: SQL Databases
Статус: Готово

Контрольная точка (checkpoint) в PostgreSQL — это процесс, при котором все измененные данные из оперативной памяти записываются на диск, чтобы гарантировать согласованность данных и сократить время восстановления после сбоя. 

Этот процесс создает точку в журнале транзакций (WAL), после которой все файлы данных будут актуальны, а вся информация сбрасывается на диск, обеспечивая восстановление до последней контрольной точки. 

Контрольные точки могут запускаться автоматически по расписанию (задается `checkpoint_timeout`) или по требованию, например, при достижении лимита размера журнала (WAL).

Процесс контрольной точки:

1. **Сброс данных**: Все измененные данные из буферного кэша (памяти) записываются на диск.
2. **Синхронизация с журналом**: Помечается последняя запись журнала (WAL), которая была записана на диск в рамках этой контрольной точки.
3. **Завершение**: После завершения процесса записывается информация о контрольной точке в специальный файл `pg_control`. 

P.S. Если `CHECKPOINT` выполняется в процессе восстановления, вместо записи новой контрольной точки производится точка перезапуска.

P.S.S. Команда `CHECKPOINT` является языковым расширением PostgreSQL.