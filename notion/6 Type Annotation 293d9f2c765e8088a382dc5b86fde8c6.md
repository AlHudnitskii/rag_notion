# 6. Type Annotation

Категория: Python Core
Статус: В процессе

Аннотации типов просто считываются интерпретатором Python и никак более не обрабатываются, но доступны для использования из стороннего кода и в первую очередь рассчитаны для использования статическими анализаторами.

Аннотации для переменных пишут через двоеточие после идентификатора. После этого может идти инициализация значения. 

![image.png](image%2032.png)

Параметры функции аннотируются так же как переменные, а возвращаемое значение указывается после стрелки -> и до завершающего двоеточия. 

![image.png](image%2033.png)

Начиная с Python 3.10, можно использовать `|` для union типов:

Хотя для аннотации можно использовать стандартные типы, много полезного сокрыто в модуле `typing`.
1. Optional - Нужен для того, чтобы переменной любого типа можно было присвоить значение None.

![image.png](image%2034.png)

![image.png](image%2035.png)

1. Any - Убирает любые ограничения с переменной. В отличие от object мы не работаем с экземпляром.

![image.png](image%2036.png)

![image.png](image%2037.png)

1. Union - Для использования нескольких определенных типов с их явным указанием в квадратных скобках.

![image.png](image%2038.png)

Помимо всего прочего существует еще и аннотация типов на коллекции:

1. List

![image.png](image%2039.png)

Аналогично можно использовать Set и FrozenSet

1. Tuple

Если планируется использовать кортеж аналогично списку: хранить неизвестное количество однотипных элементов, можно воспользоваться многоточием (…)

![image.png](image%2040.png)

1. Dict

![image.png](image%2041.png)

## `Protocol` из typing

`Protocol` — это структурная типизация (duck typing с проверкой типов). Класс соответствует Protocol, если имеет нужные методы/атрибуты.

![image.png](image%2042.png)

**Результат выполнения функции** 

Для указания типа можно использовать любую аннотацию. Если функция ничего не возвращает, то ее результат всегда равен None. Корректными вариантами еще будут: возврат без значения и завершение без вызова return. 

Если функция не возвращает управление (sys.exit), следует использовать аннотацию NoReturn:

![image.png](image%2043.png)

Если функция генераторная (содержит yield) можно использовать Iterable[T]:

![image.png](image%2044.png)

Получить аннотации можно через __**annotations__:**

![image.png](image%2045.png)