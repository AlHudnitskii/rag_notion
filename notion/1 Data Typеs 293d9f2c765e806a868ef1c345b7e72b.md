# 1. Data Typеs

Категория: Python Core
Статус: В процессе

**Тип данных** - это атрибут, определяющий, какого рода данные могут храниться в объекте.  Это могут быть целые числа, символы, метки времени, двоичные строки и т.д.

Виды типов данных:

1. Неизменяемые (immutable) : None, bool, int, float, compex, str, tuple, bytes (последовательность байтов для работы с бинарными файлами), frozenset
2. Изменяемые (mutable) :  list, dict, set, bytearray (массив заданных байтов).

Типы данных в Python можно также разделить на еще 2 группы:

1. Атомарные: int, str
2. Ссылочные: list, tuple, dict, def, class 

Разница между ними такая: атомарные объекты, при их присваивании, передаются по значению, ссылочные - по ссылке. 

Чтобы узнать тип данных, нужно воспользоваться встроенной функцией type():

![image.png](image%2014.png)

### Упорядоченные и неупорядоченные

Упорядоченные структуры данных гарантируют, что элементы извлекаются в том же порядке, в котором они были вставлены, в то время как неупорядоченные структуры данных не поддерживают какой-либо определенный порядок.

Примеры упорядоченных типов данных:

- List
- Tuple
- String
- OrderedList

Примеры неупорядоченных типов данных:

- Set
- FrozenSet
- Dict

![image.png](image%2015.png)

### Определение типа данных переменной

В отличие от `type()`, функция `isinstance()` возвращает не тип данных аргумента, а булево значение, говорящее о том, принадлежит объект к определенному классу или нет:

При попытке как-то либо изменить значение неизменяемого типа данных, переменная будет ссылаться на другой объект в памяти. В случае с изменяемым объектом новый объект создан не будет. 

![image.png](image%2016.png)

![image.png](image%2017.png)

В случае с изменяемым типом данных, мы будет постоянно работать с одним объектом. Объект, в таком случае, мы может модифицировать по любой из существующих ссылок. И по любой из ссылок мы будет получать актуальное состояние этого объекта.

В Python не рекомендуется использовать изменяемые объекты в качестве значений параметры по умолчанию по причине:

1. Значения по умолчанию вычисляются 1 раз при определении функции, а не при каждом вызове.
2. Между вызовами функций изменения в изменяемых объектах будут сохраняться. Это приводит к неочевидному поведению и трудноуловимым ошибкам при многократном вызове функции.  

В качестве альтернативы можно задавать значение по умолчанию None, в теле функции создавать новый изменяемый объект, если значение не передано. Такое решение делает поведение программы понятным и предсказуемым.

![image.png](image%2018.png)

[https://www.notion.so](https://www.notion.so)

Встроенные типы данных в Python:

## List (список) - []

### Предназначение

Упорядоченная изменяемая коллекция элементов. Используется для хранения последовательности данных, которые нужно менять, добавлять или удалять.

### Основные методы

- `append(x)` - добавить элемент в конец
- `insert(i, x)` - вставить элемент на позицию i
- `remove(x)` - удалить первый элемент со значением x
- `pop(i)` - удалить и вернуть элемент на позиции i (по умолчанию последний)
- `clear()` - очистить список
- `index(x)` - найти индекс первого вхождения x
- `count(x)` - подсчитать количество элементов x
- `sort()` - отсортировать список на месте
- `reverse()` - развернуть список
- `copy()` - создать поверхностную копию
- `extend(iterable)` - расширить список элементами из iterable

### Особенности

- **Изменяемый** (mutable) - можно менять элементы после создания
- **Упорядоченный** - сохраняет порядок элементов
- **Допускает дубликаты** - один элемент может встречаться несколько раз
- **Разнородный** - может содержать элементы разных типов
- Поддерживает индексацию и срезы: `lst[0]`, `lst[1:3]`
- Занимает больше памяти, чем tuple

## **Dict (словарь)** - `{}`

### Предназначение

Неупорядоченная (с Python 3.7+ сохраняет порядок вставки) коллекция пар ключ-значение. Используется для быстрого доступа к данным по уникальному ключу.

### Основные методы

- `get(key, default)` - получить значение по ключу (с default если нет)
- `keys()` - получить все ключи
- `values()` - получить все значения
- `items()` - получить пары (ключ, значение)
- `pop(key)` - удалить и вернуть значение по ключу
- `popitem()` - удалить и вернуть последнюю пару
- `update(dict2)` - обновить словарь парами из другого словаря
- `clear()` - очистить словарь
- `setdefault(key, default)` - вернуть значение или установить default
- `copy()` - создать поверхностную копию
- `fromkeys(seq, value)` - создать словарь из последовательности ключей

### Особенности

- **Изменяемый** (mutable)
- **Ключи уникальны** - дубликаты ключей невозможны
- **Ключи должны быть неизменяемыми** (hashable) - строки, числа, tuple
- **Быстрый доступ** - O(1) в среднем для поиска по ключу
- С Python 3.7+ гарантированно сохраняет порядок вставки
- Доступ через ключи: `dict['key']` или `dict.get('key')`

## Что такое OrderedDict?

`OrderedDict` — это подкласс обычного словаря (`dict`) из модуля `collections`, который **запоминает порядок добавления элементов**.

## Историческая справка: зачем он был нужен?

Python < 3.6: dict НЕ гарантировал порядок
С Python 3.6 (детали реализации) и **официально с Python 3.7** обычный `dict` тоже сохраняет порядок вставки:

## Set (множество) - `{элементы}` или `set()`

### Предназначение

Неупорядоченная коллекция уникальных элементов. Используется для удаления дубликатов и математических операций над множествами.

### Основные методы

- `add(x)` - добавить элемент
- `remove(x)` - удалить элемент (ошибка если нет)
- `discard(x)` - удалить элемент (без ошибки)
- `pop()` - удалить и вернуть произвольный элемент
- `clear()` - очистить множество
- `union(set2)` или `|` - объединение
- `intersection(set2)` или `&` - пересечение
- `difference(set2)` или  - разность
- `symmetric_difference(set2)` или `^` - симметрическая разность
- `update(set2)` - добавить элементы из другого множества
- `issubset(set2)` - проверка на подмножество
- `issuperset(set2)` - проверка на надмножество
- `copy()` - создать копию

### Особенности

- **Изменяемый** (mutable), есть неизменяемый вариант - `frozenset`
- **Неупорядоченный** - порядок элементов не гарантируется
- **Только уникальные элементы** - автоматически удаляет дубликаты
- **Элементы должны быть неизменяемыми** (hashable)
- **Быстрая проверка вхождения** - O(1) в среднем
- Не поддерживает индексацию
- Пустое множество: `set()` (не `{}` - это пустой словарь!)

## **Tuple (кортеж)** - `()`

### Предназначение

Упорядоченная неизменяемая коллекция элементов. Используется для хранения данных, которые не должны меняться, и в качестве ключей словарей.

### Основные методы

- `count(x)` - подсчитать количество элементов x
- `index(x)` - найти индекс первого вхождения x

### Особенности

- **Неизменяемый** (immutable) - после создания нельзя изменить
- **Упорядоченный** - сохраняет порядок элементов
- **Допускает дубликаты**
- **Быстрее и компактнее** list - меньше памяти, быстрее итерация
- Поддерживает индексацию и срезы: `tup[0]`, `tup[1:3]`
- **Может быть ключом словаря** (если содержит только hashable элементы)
- **Распаковка**: `a, b, c = (1, 2, 3)`
- Один элемент: `(1,)` - запятая обязательна!
- Используется для возврата нескольких значений из функции

![image.png](image%2019.png)

По умолчанию каждый экземпляр класса в Python хранит свои атрибуты с словаре __**dict__**

![image.png](image%2020.png)

**Особенности `__dict__`:**

- Гибкость — можно добавлять атрибуты на лету
- Каждый экземпляр имеет свой словарь
- Словарь потребляет много памяти (хеш-таблица)
- Доступ к атрибутам через словарь (медленнее)

## Как работает `__slots__`

`__slots__` заменяет `__dict__` на фиксированный набор атрибутов:

![image.png](image%2021.png)

**Особенности `__slots__`:**

- Атрибуты хранятся в фиксированных слотах (как массив)
- Нет `__dict__` у экземпляров (есть у класса)
- Быстрый доступ к атрибутам (прямая адресация)
- Меньше памяти

![image.png](image%2022.png)

## `array` из модуля `array`

`array.array` — эффективный массив для однотипных данных (как в C).

![image.png](image%2023.png)

### Hash tables in Python